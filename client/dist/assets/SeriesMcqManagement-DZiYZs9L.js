import{r as l,j as e}from"./react-BLQlKNq_.js";import{u as Ke}from"./notistack-DWKSkMQ9.js";import{a as b}from"./index-CAcQg_82.js";import{L as Xe}from"./yet-another-react-lightbox-DocsD2co.js";import{B as w,b as p,v as ee,ag as te,af as n,G as f,H as C,J as v,f as r,R as y,m as Ye,n as Ze,F as I,aG as et,aH as tt,a8 as st,w as it,P as rt,x as at,j as lt,T as B,a as o,C as me,y as nt,aj as $,I as fe,ar as ot,al as ct,z as dt,am as Ce,an as ve,ao as ye,ax as ut,ay as se,as as be,ap as Ie}from"./@mui-Bw2wRnxu.js";import"./@babel-HOuxngs4.js";import"./react-dom-DmmE3xc2.js";import"./scheduler-CzFDRTuY.js";import"./goober-DovPBWGu.js";import"./react-router-dom-BCp3cZHX.js";import"./react-router-CeklShVs.js";import"./@remix-run-CbFatO5U.js";import"./react-redux-10GvvXuy.js";import"./use-sync-external-store-De7g8zNk.js";import"./axios-Cm0UX6qg.js";import"./@reduxjs-DVdFRU_h.js";import"./redux-DITMfSWq.js";import"./immer-BWU1mfoO.js";import"./reselect-BeKUwQU7.js";import"./redux-thunk-ClJT1hhx.js";import"./react-typed-DYA10Kre.js";import"./typed.js-exEGtOgn.js";import"./react-bootstrap-sweetalert-DQB2ynYp.js";import"./prop-types-C1xvqhu3.js";import"./swiper-DTKdPQEP.js";import"./fslightbox-react-CQdsEJ3s.js";import"./react-bootstrap-C0bN-j8n.js";import"./classnames-BfIYw_zE.js";import"./@restart-JOvkJ3VN.js";import"./dom-helpers-nL1pTuZz.js";import"./react-transition-group-DSzsIoyj.js";import"./react-lazyload-DZ8paPqQ.js";import"./react-loading-skeleton-D7jF0Q-E.js";import"./@emotion-C2ZuPDAx.js";import"./hoist-non-react-statics-Buxaj0Kl.js";import"./react-is-8JwjhRSi.js";import"./stylis-NkKAe6Bn.js";import"./clsx-B-dksMZM.js";import"./@popperjs-BQBsAJpH.js";const Yt=()=>{var ge,je,pe;const[S,A]=l.useState([]),[ie,E]=l.useState([]),[N,Q]=l.useState(!1),[Se,re]=l.useState(!1),[Me,H]=l.useState(!1),[F,q]=l.useState(null),[M,we]=l.useState([]),[m,ae]=l.useState([]),[u,Qe]=l.useState(""),[h,P]=l.useState(""),[j,O]=l.useState([]),[z,le]=l.useState(0),[V,Te]=l.useState(200),[Ae,U]=l.useState(0),[c,W]=l.useState({subject:[],chapter:"",topic:"",difficulty:""}),[T,ne]=l.useState(""),[_,oe]=l.useState(0),[G,ce]=l.useState(null),[J,D]=l.useState(""),[K,de]=l.useState(null),[X,R]=l.useState(""),[Oe,ue]=l.useState(!1),[Ue,We]=l.useState([]),{enqueueSnackbar:d}=Ke(),[i,x]=l.useState({question:"",options:["","","",""],correctOption:0,subject:[],chapter:"",topic:"",difficulty:"easy",category:"normal",course:"mdcat",info:"",explain:"",imageUrl:"",questionImg:"",seriesId:"",testId:""});l.useEffect(()=>{Le()},[]),l.useEffect(()=>{u?L():(A([]),E([]),U(0))},[u,z,V]),l.useEffect(()=>{u?Ee(u):(ae([]),P(""))},[u]),l.useEffect(()=>{Fe()},[c,T,ie,h]);const Le=async()=>{try{const t=await b.get("/series/all");console.log(t.data),we(t.data||[])}catch(t){console.error("Error fetching series:",t),d("Failed to fetch series",{variant:"error"})}},Ee=async t=>{try{const s=await b.get(`/tests/series/${t}`);ae(s.data||[])}catch(s){console.error("Error fetching tests:",s),d("Failed to fetch tests",{variant:"error"})}},L=async()=>{if(!u){A([]),E([]),U(0);return}Q(!0);try{const t=new URLSearchParams({page:z+1,limit:V,...c}),s=await b.get(`/series-mcqs/series/${u}?${t}`);A(s.data.mcqs||[]),E(s.data.mcqs||[]),U(s.data.total||0)}catch(t){console.error("Error fetching MCQs:",t),d("Failed to fetch MCQs",{variant:"error"}),A([]),E([]),U(0)}finally{Q(!1)}},Fe=()=>{let t=[...ie];h&&(t=t.filter(s=>{var a;return((a=s.testId)==null?void 0:a._id)===h})),T&&(t=t.filter(s=>s.question.toLowerCase().includes(T.toLowerCase())||s.chapter.toLowerCase().includes(T.toLowerCase())||s.topic.toLowerCase().includes(T.toLowerCase()))),c.subject&&c.subject.length>0&&(t=t.filter(s=>{const a=Array.isArray(s.subject)?s.subject:[s.subject];return c.subject.some(g=>a.includes(g))})),c.chapter&&(t=t.filter(s=>s.chapter.toLowerCase().includes(c.chapter.toLowerCase()))),c.topic&&(t=t.filter(s=>s.topic.toLowerCase().includes(c.topic.toLowerCase()))),c.difficulty&&(t=t.filter(s=>s.difficulty===c.difficulty)),A(t),U(t.length)},Pe=t=>{t.target.checked?O(S.map(s=>s._id)):O([])},_e=t=>{O(s=>s.includes(t)?s.filter(a=>a!==t):[...s,t])},De=()=>{if(j.length===0){d("Please select MCQs to assign",{variant:"warning"});return}H(!0)},he=()=>{H(!1)},Re=async()=>{var t,s;if(!h){d("Please select a test",{variant:"warning"});return}Q(!0);try{const a=await b.post("/series-mcqs/assign",{mcqIds:j,testId:h}),{message:g,addedCount:Z,totalQuestions:ht}=a.data;d(g,{variant:"success"}),Z<j.length&&d(`${j.length-Z} MCQs were already assigned to this test`,{variant:"info"}),O([]),H(!1),L()}catch(a){console.error("Error assigning MCQs:",a);const g=((s=(t=a.response)==null?void 0:t.data)==null?void 0:s.error)||"Failed to assign MCQs";d(g,{variant:"error"})}finally{Q(!1)}},ke=async()=>{var t,s;if(!h){d("Please select a test",{variant:"warning"});return}if(j.length===0){d("Please select MCQs to remove",{variant:"warning"});return}if(window.confirm(`Are you sure you want to remove ${j.length} MCQs from this test?`)){Q(!0);try{const a=await b.delete(`/series-mcqs/test/${h}/mcqs`,{data:{mcqIds:j}}),{message:g,removedCount:Z}=a.data;d(g,{variant:"success"}),O([]),L()}catch(a){console.error("Error removing MCQs from test:",a);const g=((s=(t=a.response)==null?void 0:t.data)==null?void 0:s.error)||"Failed to remove MCQs from test";d(g,{variant:"error"})}finally{Q(!1)}}},xe=(t=null)=>{t?(q(t),x({question:t.question,options:t.options,correctOption:t.correctOption,subject:Array.isArray(t.subject)?t.subject:[t.subject],chapter:t.chapter,topic:t.topic,difficulty:t.difficulty,category:t.category,course:t.course,info:t.info||"",explain:t.explain||"",imageUrl:t.imageUrl||"",questionImg:t.questionImg||"",seriesId:t.seriesId,testId:t.testId||""}),D(t.imageUrl||""),R(t.questionImg||"")):(q(null),x({question:"",options:["","","",""],correctOption:0,subject:[],chapter:"",topic:"",difficulty:"easy",category:"normal",course:"mdcat",info:"",explain:"",imageUrl:"",questionImg:"",seriesId:u,testId:h}),D(""),R("")),oe(0),re(!0)},Y=()=>{re(!1),q(null),ce(null),D(""),de(null),R(""),x({question:"",options:["","","",""],correctOption:0,subject:[],chapter:"",topic:"",difficulty:"easy",category:"normal",course:"mdcat",info:"",explain:"",imageUrl:"",questionImg:"",seriesId:"",testId:""})},Be=t=>{const s=t.target.files[0];s&&(ce(s),D(URL.createObjectURL(s)))},$e=t=>{const s=t.target.files[0];s&&(de(s),R(URL.createObjectURL(s)))},Ne=(t,s)=>{oe(s)},k=(t,s=0)=>{We(t),ue(!0)},He=async()=>{try{Q(!0);let t={...i};if(G){const s=new FormData;s.append("image",G);const a={headers:{"Content-Type":"multipart/form-data"}},g=await b.post("/upload/img",s,a);if(g.status===200)t.imageUrl=g.data.fileURL;else{d("Failed to upload MCQ image",{variant:"error"});return}}if(K){const s=new FormData;s.append("image",K);const a={headers:{"Content-Type":"multipart/form-data"}},g=await b.post("/upload/img",s,a);if(g.status===200)t.questionImg=g.data.fileURL;else{d("Failed to upload question image",{variant:"error"});return}}F?(await b.put(`/series-mcqs/${F._id}`,t),d("MCQ updated successfully",{variant:"success"})):(await b.post("/series-mcqs",t),d("MCQ created successfully",{variant:"success"})),Y(),L()}catch(t){console.error("Error saving MCQ:",t),d("Failed to save MCQ",{variant:"error"})}finally{Q(!1)}},qe=async t=>{if(window.confirm("Are you sure you want to delete this MCQ?"))try{await b.delete(`/series-mcqs/${t}`),d("MCQ deleted successfully",{variant:"success"}),L()}catch(s){console.error("Error deleting MCQ:",s),d("Failed to delete MCQ",{variant:"error"})}},ze=(t,s)=>{const a=[...i.options];a[t]=s,x({...i,options:a})},Ve=()=>{W({subject:[],chapter:"",topic:"",difficulty:""}),ne(""),P("")},Ge=(t,s)=>{le(s)},Je=t=>{Te(Number.parseInt(t.target.value,10)),le(0)};return e.jsxs(w,{sx:{p:3},children:[e.jsx(p,{variant:"h4",gutterBottom:!0,children:"Series MCQ Management"}),e.jsx(ee,{sx:{mb:3},children:e.jsx(te,{children:e.jsxs(n,{container:!0,spacing:2,children:[e.jsx(n,{item:!0,xs:12,md:6,children:e.jsxs(f,{fullWidth:!0,children:[e.jsx(C,{children:"Select Series"}),e.jsx(v,{value:u,onChange:t=>Qe(t.target.value),label:"Select Series",children:M&&(M==null?void 0:M.map(t=>e.jsx(r,{value:t._id,children:t.title},t._id)))})]})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsxs(f,{fullWidth:!0,children:[e.jsx(C,{children:"Filter by Test (Optional)"}),e.jsxs(v,{value:h,onChange:t=>P(t.target.value),label:"Filter by Test (Optional)",children:[e.jsx(r,{value:"",children:"All Tests"}),m==null?void 0:m.map(t=>e.jsx(r,{value:t._id,children:t.title},t._id))]})]})})]})})}),e.jsx(ee,{sx:{mb:3},children:e.jsx(te,{children:e.jsxs(n,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(y,{fullWidth:!0,placeholder:"Search questions...",value:T,onChange:t=>ne(t.target.value),InputProps:{startAdornment:e.jsx(Ye,{position:"start",children:e.jsx(Ze,{})})}})}),e.jsx(n,{item:!0,xs:12,md:2,children:e.jsxs(f,{fullWidth:!0,children:[e.jsx(C,{children:"Subject"}),e.jsxs(v,{multiple:!0,value:c.subject,onChange:t=>W({...c,subject:t.target.value}),label:"Subject",renderValue:t=>t.join(", "),children:[e.jsx(r,{value:"physics",children:"Physics"}),e.jsx(r,{value:"chemistry",children:"Chemistry"}),e.jsx(r,{value:"biology",children:"Biology"}),e.jsx(r,{value:"english",children:"English"}),e.jsx(r,{value:"mathematics",children:"Mathematics"}),e.jsx(r,{value:"logic",children:"Logic"}),e.jsx(r,{value:"others",children:"Others"})]})]})}),e.jsx(n,{item:!0,xs:12,md:2,children:e.jsx(y,{fullWidth:!0,placeholder:"Chapter",value:c.chapter,onChange:t=>W({...c,chapter:t.target.value})})}),e.jsx(n,{item:!0,xs:12,md:2,children:e.jsx(y,{fullWidth:!0,placeholder:"Topic",value:c.topic,onChange:t=>W({...c,topic:t.target.value})})}),e.jsx(n,{item:!0,xs:12,md:2,children:e.jsxs(f,{fullWidth:!0,children:[e.jsx(C,{children:"Difficulty"}),e.jsxs(v,{value:c.difficulty,onChange:t=>W({...c,difficulty:t.target.value}),label:"Difficulty",children:[e.jsx(r,{value:"",children:"All"}),e.jsx(r,{value:"easy",children:"Easy"}),e.jsx(r,{value:"medium",children:"Medium"}),e.jsx(r,{value:"hard",children:"Hard"})]})]})}),e.jsx(n,{item:!0,xs:12,md:1,children:e.jsx(I,{variant:"outlined",onClick:Ve,startIcon:e.jsx(et,{}),children:"Clear"})})]})})}),e.jsxs(w,{sx:{mb:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(w,{children:[e.jsxs(p,{variant:"h6",children:["MCQs: ",S.length," ",u&&M.find(t=>t._id===u)&&`(${M.find(t=>t._id===u).title})`,h&&m.find(t=>t._id===h)&&` - Test: ${m.find(t=>t._id===h).title}`]}),e.jsxs(p,{variant:"body2",color:"text.secondary",children:[j.length," MCQs selected"]})]}),e.jsxs(w,{children:[e.jsx(I,{variant:"contained",startIcon:e.jsx(tt,{}),onClick:De,disabled:!u||j.length===0,sx:{mr:1},children:"Assign to Test"}),h&&e.jsx(I,{variant:"outlined",color:"error",onClick:ke,disabled:!u||j.length===0,sx:{mr:1},children:"Remove from Test"}),e.jsx(I,{variant:"contained",startIcon:e.jsx(st,{}),onClick:()=>xe(),disabled:!u,children:"Add MCQ"})]})]}),u?e.jsxs(it,{component:rt,children:[e.jsxs(at,{children:[e.jsx(lt,{children:e.jsxs(B,{children:[e.jsx(o,{padding:"checkbox",children:e.jsx(me,{indeterminate:j.length>0&&j.length<S.length,checked:S.length>0&&j.length===S.length,onChange:Pe})}),e.jsx(o,{children:"Question"}),e.jsx(o,{children:"Subject"}),e.jsx(o,{children:"Chapter"}),e.jsx(o,{children:"Topic"}),e.jsx(o,{children:"Difficulty"}),e.jsx(o,{children:"Test"}),e.jsx(o,{children:"Explanation Image"}),e.jsx(o,{children:"Question Image"}),e.jsx(o,{children:"Actions"})]})}),e.jsx(nt,{children:N?e.jsx(B,{children:e.jsx(o,{colSpan:10,sx:{textAlign:"center",py:4},children:e.jsx(p,{children:"Loading MCQs..."})})}):S.length===0?e.jsx(B,{children:e.jsx(o,{colSpan:10,sx:{textAlign:"center",py:4},children:e.jsx(p,{color:"text.secondary",children:"No MCQs found for this series"})})}):S==null?void 0:S.map(t=>{var s;return e.jsxs(B,{selected:j.includes(t._id),hover:!0,children:[e.jsx(o,{padding:"checkbox",children:e.jsx(me,{checked:j.includes(t._id),onChange:()=>_e(t._id)})}),e.jsx(o,{children:e.jsx(p,{variant:"body2",noWrap:!0,sx:{maxWidth:200},children:t.question})}),e.jsx(o,{children:Array.isArray(t.subject)?t.subject.map((a,g)=>e.jsx($,{label:a.charAt(0).toUpperCase()+a.slice(1),size:"small",sx:{mr:.5,mb:.5}},g)):e.jsx($,{label:t.subject.charAt(0).toUpperCase()+t.subject.slice(1),size:"small"})}),e.jsx(o,{children:t.chapter}),e.jsx(o,{children:t.topic}),e.jsx(o,{children:e.jsx($,{label:t.difficulty,size:"small",color:t.difficulty==="easy"?"success":t.difficulty==="medium"?"warning":"error"})}),e.jsx(o,{children:((s=t.testId)==null?void 0:s.title)||"Not assigned"}),e.jsx(o,{children:t.imageUrl?e.jsx("img",{src:t.imageUrl,alt:"MCQ",style:{width:50,height:50,objectFit:"cover",borderRadius:4,cursor:"pointer"},onClick:()=>k([{src:t.imageUrl}],0)}):e.jsx(p,{variant:"caption",color:"text.secondary",children:"No image"})}),e.jsx(o,{children:t.questionImg?e.jsx("img",{src:t.questionImg,alt:"Question",style:{width:50,height:50,objectFit:"cover",borderRadius:4,cursor:"pointer"},onClick:()=>k([{src:t.questionImg}],0)}):e.jsx(p,{variant:"caption",color:"text.secondary",children:"No image"})}),e.jsxs(o,{children:[e.jsx(fe,{onClick:()=>xe(t),children:e.jsx(ot,{})}),e.jsx(fe,{onClick:()=>qe(t._id),color:"error",children:e.jsx(ct,{})})]})]},t._id)})})]}),e.jsx(dt,{rowsPerPageOptions:[50,100,200],component:"div",count:Ae,rowsPerPage:V,page:z,onPageChange:Ge,onRowsPerPageChange:Je})]}):e.jsx(ee,{children:e.jsx(te,{sx:{textAlign:"center",py:4},children:e.jsx(p,{variant:"h6",color:"text.secondary",children:"Please select a series to view MCQs"})})}),e.jsxs(Ce,{open:Se,onClose:Y,maxWidth:"md",fullWidth:!0,children:[e.jsx(ve,{children:F?"Edit MCQ":"Add New MCQ"}),e.jsxs(ye,{children:[e.jsxs(ut,{value:_,onChange:Ne,sx:{mb:2},children:[e.jsx(se,{label:"MCQ Details"}),e.jsx(se,{label:"Explanation Image"}),e.jsx(se,{label:"Question Image"})]}),_===0&&e.jsxs(n,{container:!0,spacing:2,sx:{mt:1},children:[e.jsx(n,{item:!0,xs:12,children:e.jsx(y,{fullWidth:!0,label:"Question",multiline:!0,rows:3,value:i.question,onChange:t=>x({...i,question:t.target.value})})}),(ge=i==null?void 0:i.options)==null?void 0:ge.map((t,s)=>e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(y,{fullWidth:!0,label:`Option ${s+1}`,value:t,onChange:a=>ze(s,a.target.value),InputProps:{endAdornment:e.jsx($,{label:i.correctOption===s?"Correct":"",color:i.correctOption===s?"success":"default",size:"small"})}})},s)),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsxs(f,{fullWidth:!0,children:[e.jsx(C,{children:"Correct Option"}),e.jsx(v,{value:i.correctOption,onChange:t=>x({...i,correctOption:t.target.value}),label:"Correct Option",children:(je=i==null?void 0:i.options)==null?void 0:je.map((t,s)=>e.jsxs(r,{value:s,children:["Option ",s+1]},s))})]})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsxs(f,{fullWidth:!0,children:[e.jsx(C,{children:"Subject"}),e.jsxs(v,{multiple:!0,value:i.subject,onChange:t=>x({...i,subject:t.target.value}),label:"Subject",renderValue:t=>t.join(", "),children:[e.jsx(r,{value:"physics",children:"Physics"}),e.jsx(r,{value:"chemistry",children:"Chemistry"}),e.jsx(r,{value:"biology",children:"Biology"}),e.jsx(r,{value:"english",children:"English"}),e.jsx(r,{value:"mathematics",children:"Mathematics"}),e.jsx(r,{value:"logic",children:"Logic"}),e.jsx(r,{value:"others",children:"Others"})]})]})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(y,{fullWidth:!0,label:"Chapter",value:i.chapter,onChange:t=>x({...i,chapter:t.target.value})})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(y,{fullWidth:!0,label:"Topic",value:i.topic,onChange:t=>x({...i,topic:t.target.value})})}),e.jsx(n,{item:!0,xs:12,md:4,children:e.jsxs(f,{fullWidth:!0,children:[e.jsx(C,{children:"Difficulty"}),e.jsxs(v,{value:i.difficulty,onChange:t=>x({...i,difficulty:t.target.value}),label:"Difficulty",children:[e.jsx(r,{value:"easy",children:"Easy"}),e.jsx(r,{value:"medium",children:"Medium"}),e.jsx(r,{value:"hard",children:"Hard"})]})]})}),e.jsx(n,{item:!0,xs:12,md:4,children:e.jsxs(f,{fullWidth:!0,children:[e.jsx(C,{children:"Category"}),e.jsxs(v,{value:i.category,onChange:t=>x({...i,category:t.target.value}),label:"Category",children:[e.jsx(r,{value:"normal",children:"Normal"}),e.jsx(r,{value:"critical",children:"Critical"})]})]})}),e.jsx(n,{item:!0,xs:12,md:4,children:e.jsxs(f,{fullWidth:!0,children:[e.jsx(C,{children:"Series"}),e.jsx(v,{value:i.seriesId,onChange:t=>x({...i,seriesId:t.target.value}),label:"Series",disabled:!!u,children:M==null?void 0:M.map(t=>e.jsx(r,{value:t._id,children:t.title},t._id))})]})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsxs(f,{fullWidth:!0,children:[e.jsx(C,{children:"Test (Optional)"}),e.jsxs(v,{value:i.testId,onChange:t=>x({...i,testId:t.target.value}),label:"Test (Optional)",disabled:!u,children:[e.jsx(r,{value:"",children:"No Test"}),m==null?void 0:m.map(t=>e.jsx(r,{value:t._id,children:t.title},t._id))]})]})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(y,{fullWidth:!0,label:"Explanation Image URL (Optional)",value:i.imageUrl,onChange:t=>x({...i,imageUrl:t.target.value}),disabled:!!G})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(y,{fullWidth:!0,label:"Question Image URL (Optional)",value:i.questionImg,onChange:t=>x({...i,questionImg:t.target.value}),disabled:!!K})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(y,{fullWidth:!0,label:"Info (Optional)",multiline:!0,rows:2,value:i.info,onChange:t=>x({...i,info:t.target.value})})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(y,{fullWidth:!0,label:"Explanation (Optional)",multiline:!0,rows:3,value:i.explain,onChange:t=>x({...i,explain:t.target.value})})})]}),_===1&&e.jsxs(w,{children:[e.jsx(p,{variant:"h6",gutterBottom:!0,children:"Explanation Image"}),e.jsx("input",{accept:"image/*",style:{display:"none"},id:"mcq-image-upload",type:"file",onChange:Be}),e.jsx("label",{htmlFor:"mcq-image-upload",children:e.jsx(I,{variant:"outlined",component:"span",startIcon:e.jsx(be,{}),sx:{mb:2},children:"Upload Explanation Image"})}),J&&e.jsx(w,{sx:{mt:2},children:e.jsx("img",{src:J,alt:"MCQ",style:{maxWidth:"100%",maxHeight:200,borderRadius:8,cursor:"pointer"},onClick:()=>k([{src:J}],0)})})]}),_===2&&e.jsxs(w,{children:[e.jsx(p,{variant:"h6",gutterBottom:!0,children:"Question Image"}),e.jsx("input",{accept:"image/*",style:{display:"none"},id:"question-image-upload",type:"file",onChange:$e}),e.jsx("label",{htmlFor:"question-image-upload",children:e.jsx(I,{variant:"outlined",component:"span",startIcon:e.jsx(be,{}),sx:{mb:2},children:"Upload Question Image"})}),X&&e.jsx(w,{sx:{mt:2},children:e.jsx("img",{src:X,alt:"Question",style:{maxWidth:"100%",maxHeight:200,borderRadius:8,cursor:"pointer"},onClick:()=>k([{src:X}],0)})})]})]}),e.jsxs(Ie,{children:[e.jsx(I,{onClick:Y,children:"Cancel"}),e.jsx(I,{onClick:He,variant:"contained",disabled:N,children:F?"Update":"Create"})]})]}),e.jsxs(Ce,{open:Me,onClose:he,maxWidth:"sm",fullWidth:!0,children:[e.jsx(ve,{children:"Assign MCQs to Test"}),e.jsx(ye,{children:e.jsxs(w,{sx:{mt:2},children:[e.jsxs(p,{gutterBottom:!0,children:["Selected MCQs: ",j.length]}),h&&e.jsxs(p,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Target Test: ",(pe=m.find(t=>t._id===h))==null?void 0:pe.title]}),e.jsxs(f,{fullWidth:!0,sx:{mt:2},children:[e.jsx(C,{children:"Select Test"}),e.jsx(v,{value:h,onChange:t=>P(t.target.value),label:"Select Test",children:m==null?void 0:m.map(t=>{var s;return e.jsxs(r,{value:t._id,children:[t.title," (",((s=t.questions)==null?void 0:s.length)||0," questions)"]},t._id)})})]})]})}),e.jsxs(Ie,{children:[e.jsx(I,{onClick:he,children:"Cancel"}),e.jsx(I,{onClick:Re,variant:"contained",disabled:N||!h,children:"Assign"})]})]}),e.jsx(Xe,{open:Oe,close:()=>ue(!1),slides:Ue})]})};export{Yt as default};
