import{r,j as e}from"./react-BLQlKNq_.js";import{a as g}from"./index-BZIQzIKv.js";import{P as M,w,x as W,j as D,T as o,a as l,y as T,F as d,b as c,z as S,af as U,ag as _,ah as q,ai as B}from"./@mui-JR0bzeok.js";import"./@babel-HOuxngs4.js";import"./react-dom-DmmE3xc2.js";import"./scheduler-CzFDRTuY.js";import"./react-router-dom-BCp3cZHX.js";import"./react-router-CeklShVs.js";import"./@remix-run-CbFatO5U.js";import"./react-redux-10GvvXuy.js";import"./use-sync-external-store-De7g8zNk.js";import"./notistack-DWKSkMQ9.js";import"./goober-DovPBWGu.js";import"./axios-Cm0UX6qg.js";import"./@reduxjs-DVdFRU_h.js";import"./redux-DITMfSWq.js";import"./immer-BWU1mfoO.js";import"./reselect-BeKUwQU7.js";import"./redux-thunk-ClJT1hhx.js";import"./react-typed-DYA10Kre.js";import"./typed.js-exEGtOgn.js";import"./react-bootstrap-sweetalert-DQB2ynYp.js";import"./prop-types-C1xvqhu3.js";import"./swiper-DTKdPQEP.js";import"./fslightbox-react-CQdsEJ3s.js";import"./react-bootstrap-C0bN-j8n.js";import"./classnames-BfIYw_zE.js";import"./@restart-JOvkJ3VN.js";import"./dom-helpers-nL1pTuZz.js";import"./react-transition-group-DSzsIoyj.js";import"./react-lazyload-DZ8paPqQ.js";import"./react-loading-skeleton-D7jF0Q-E.js";import"./@emotion-C2ZuPDAx.js";import"./hoist-non-react-statics-Buxaj0Kl.js";import"./react-is-8JwjhRSi.js";import"./stylis-NkKAe6Bn.js";import"./clsx-B-dksMZM.js";import"./@popperjs-BQBsAJpH.js";const h=[{id:"name",label:"Username",minWidth:170},{id:"email",label:"Email",minWidth:170},{id:"msg",label:"Message",minWidth:170},{id:"question",label:"Question",minWidth:170},{id:"read",label:"Read",minWidth:100,align:"center"},{id:"actions",label:"Actions",minWidth:100,align:"center"}];function Me(){const[n,x]=r.useState(0),[i,E]=r.useState(10),[H,j]=r.useState(!1),[N,b]=r.useState(""),[y,O]=r.useState([]),[f,A]=r.useState([]),[p,P]=r.useState(!1),C=(a,t)=>{x(t)},u=a=>{E(+a.target.value),x(0)},v=a=>{b(a),j(!0)},R=()=>{j(!1),b("")},I=async a=>{try{await g.get(`/report/${a}`),P(!p)}catch{}},k=async a=>{try{await g.delete(`/report/${a}`),P(!p)}catch(t){console.log(t)}};return r.useEffect(()=>{(async()=>{try{const s=(await g.get("/report")).data;O(s.filter(m=>m.isRead==!1)),A(s.filter(m=>m.isRead==!0))}catch(t){console.error("Error fetching data:",t)}})()},[p]),e.jsxs("div",{className:"p-2",children:[e.jsx("h1",{className:"text-primary fw-bold px-3 py-1",children:"Unread Messages"}),e.jsxs(M,{sx:{width:"100%",overflow:"hidden"},children:[e.jsx(w,{sx:{maxHeight:440},children:e.jsxs(W,{stickyHeader:!0,"aria-label":"sticky table",children:[e.jsx(D,{children:e.jsx(o,{children:h.map(a=>e.jsx(l,{align:a.align,style:{minWidth:a.minWidth},children:a.label},a.id))})}),e.jsx(T,{children:y.slice(n*i,n*i+i).map(a=>e.jsx(o,{hover:!0,role:"checkbox",tabIndex:-1,children:h.map(t=>{const s=a[t.id];return e.jsx(l,{align:t.align,children:t.id==="read"?e.jsx(d,{variant:"contained",onClick:()=>I(a._id),children:"Read"}):t.id==="msg"?e.jsxs(c,{variant:"body2",sx:{cursor:"pointer"},onClick:()=>v(a.msg),children:[s.split(" ").slice(0,5).join(" "),"..."]}):t.id==="actions"?e.jsx(d,{variant:"contained",color:"error",onClick:()=>k(a._id),children:"Delete"}):s},t.id)})},a.email))})]})}),e.jsx(S,{rowsPerPageOptions:[10,25,100],component:"div",count:y.length,rowsPerPage:i,page:n,onPageChange:C,onRowsPerPageChange:u})]}),e.jsx("h1",{className:"text-primary fw-bold px-3 py-2 mt-5",children:"Read Messages"}),e.jsxs(M,{sx:{width:"100%",overflow:"hidden"},children:[e.jsx(w,{sx:{maxHeight:440},children:e.jsxs(W,{stickyHeader:!0,"aria-label":"sticky table",children:[e.jsx(D,{children:e.jsx(o,{children:h.map(a=>e.jsx(l,{align:a.align,style:{minWidth:a.minWidth},children:a.label},a.id))})}),e.jsx(T,{children:f.slice(n*i,n*i+i).map(a=>e.jsx(o,{hover:!0,role:"checkbox",tabIndex:-1,children:h.map(t=>{const s=a[t.id];return e.jsx(l,{align:t.align,children:t.id==="read"?e.jsx(c,{variant:"body2",color:"textSecondary",children:"Read"}):t.id==="msg"?e.jsxs(c,{variant:"body2",sx:{cursor:"pointer"},onClick:()=>v(a.msg),children:[s.split(" ").slice(0,5).join(" "),"..."]}):t.id==="actions"?e.jsx(d,{variant:"contained",color:"error",onClick:()=>k(a._id),children:"Delete"}):s},t.id)})},a.email))})]})}),e.jsx(S,{rowsPerPageOptions:[10,25,100],component:"div",count:f.length,rowsPerPage:i,page:n,onPageChange:C,onRowsPerPageChange:u})]}),e.jsxs(U,{open:H,onClose:R,maxWidth:"sm",fullWidth:!0,children:[e.jsx(_,{className:"fw-bold text-primary",children:"Message Details"}),e.jsx(q,{children:e.jsx(c,{variant:"body1",children:N})}),e.jsx(B,{children:e.jsx(d,{onClick:R,color:"primary",children:"Close"})})]})]})}export{Me as default};
