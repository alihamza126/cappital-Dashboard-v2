import{r as n,j as e}from"./react-BLQlKNq_.js";import{L as y}from"./react-router-dom-BCp3cZHX.js";import{u as q}from"./notistack-DWKSkMQ9.js";import{S as W}from"./react-bootstrap-C0bN-j8n.js";import{a as E}from"./index-PS8_ImHQ.js";import{c as F}from"./react-router-CeklShVs.js";import{b3 as R,t as I,b4 as B,B as j,b,al as t,R as a,m as D,I as L,ak as M,aj as U,F as z,c as O}from"./@mui-DAjQFfGe.js";import"./@babel-HOuxngs4.js";import"./react-dom-DmmE3xc2.js";import"./scheduler-CzFDRTuY.js";import"./@remix-run-CbFatO5U.js";import"./goober-DovPBWGu.js";import"./classnames-BfIYw_zE.js";import"./@restart-JOvkJ3VN.js";import"./dom-helpers-nL1pTuZz.js";import"./prop-types-C1xvqhu3.js";import"./react-transition-group-DSzsIoyj.js";import"./react-redux-10GvvXuy.js";import"./use-sync-external-store-De7g8zNk.js";import"./axios-Cm0UX6qg.js";import"./@reduxjs-DVdFRU_h.js";import"./redux-DITMfSWq.js";import"./immer-BWU1mfoO.js";import"./reselect-BeKUwQU7.js";import"./redux-thunk-ClJT1hhx.js";import"./react-typed-DYA10Kre.js";import"./typed.js-exEGtOgn.js";import"./react-bootstrap-sweetalert-DQB2ynYp.js";import"./swiper-DTKdPQEP.js";import"./fslightbox-react-CQdsEJ3s.js";import"./react-lazyload-DZ8paPqQ.js";import"./react-loading-skeleton-D7jF0Q-E.js";import"./@emotion-C2ZuPDAx.js";import"./hoist-non-react-statics-Buxaj0Kl.js";import"./react-is-8JwjhRSi.js";import"./stylis-NkKAe6Bn.js";import"./clsx-B-dksMZM.js";import"./@popperjs-BQBsAJpH.js";function V(l){return e.jsxs(b,{variant:"body2",color:"text.secondary",align:"center",...l,children:["Copyright Â© ",e.jsx(y,{color:"inherit",to:"/",children:"The Capital Academy"})," ",new Date().getFullYear(),"."]})}const G=O();function ke(){const[l,c]=n.useState(!1),[r,v]=n.useState({}),{enqueueSnackbar:o}=q(),w=F(),[p,S]=n.useState(0),[h,C]=n.useState(0),[x,T]=n.useState(0),A=async s=>{s.preventDefault();const m=new FormData(s.currentTarget),u={};for(let[i,d]of m.entries())d.trim()||(u[i]=`${i.charAt(0).toUpperCase()+i.slice(1)} is required`);v(u);let g={};for(let[i,d]of m.entries())g[i]=d.trim();if(Object.keys(u).length===0)if(p+h==x)try{c(!0);const i=await E.post("/auth/register",g);o(i.data.message,{variant:"success"}),setTimeout(()=>{o("redirecting to login page",{variant:"info"})},1e3),setTimeout(()=>{w("/signin")},3e3),c(!1)}catch(i){c(!1),o(i.response.data.message,{variant:"error"})}else o("Please Fill Right Captcha Answer",{variant:"warning"})},N=()=>{const s=Math.floor(Math.random()*10),m=Math.floor(Math.random()*10);S(s),C(m)};n.useEffect(()=>{N()},[r]);const[f,P]=n.useState(!1),k=()=>{P(s=>!s)};return e.jsx("div",{className:"signup overflow-hidden",children:e.jsx(R,{theme:G,children:e.jsxs(I,{component:"main",maxWidth:"xs",className:"bg-white py- rounded-4 shadow-lg",style:{position:"relative"},children:[e.jsx(B,{}),e.jsxs(j,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(b,{component:"h1",variant:"h4",className:"mt-3 text-secondary fw-bold",children:"Sign up"}),e.jsxs(j,{component:"form",noValidate:!0,onSubmit:A,sx:{mt:3},children:[e.jsxs(t,{container:!0,spacing:2,children:[e.jsx(t,{item:!0,xs:12,sm:6,children:e.jsx(a,{autoComplete:"given-name",name:"username",required:!0,fullWidth:!0,id:"username",label:"User Name",autoFocus:!0,error:!!r.username,helperText:r.username})}),e.jsx(t,{item:!0,xs:12,sm:6,children:e.jsx(a,{required:!0,fullWidth:!0,id:"fathername",label:"Father Name",name:"fathername",autoComplete:"family-name",error:!!r.fathername,helperText:r.fathername})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(a,{required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",type:"email",autoComplete:"email",error:!!r.email,helperText:r.email})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(a,{required:!0,fullWidth:!0,id:"city",label:"Enter city",name:"city",autoComplete:"city",error:!!r.city,helperText:r.city})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(a,{required:!0,fullWidth:!0,id:"contact",label:"Contact No",name:"contact",autoComplete:"contact",error:!!r.contact,helperText:r.contact})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(a,{required:!0,fullWidth:!0,name:"password",label:"Password",type:f?"text":"password",id:"password",autoComplete:"new-password",error:!!r.password,helperText:r.password,InputProps:{endAdornment:e.jsx(D,{position:"end",children:e.jsx(L,{onClick:k,edge:"end",children:f?e.jsx(M,{}):e.jsx(U,{})})})}})}),e.jsxs(t,{container:!0,spacing:3,justifyContent:"center",mt:1,children:[e.jsx(t,{item:!0,xs:2,textAlign:"center",marginRight:"-20px",children:e.jsx(a,{id:"captcha-input1",variant:"outlined",value:p,inputProps:{style:{height:"8px"}}})}),e.jsx(t,{item:!0,fontSize:20,p:1,mt:.7,marginLeft:1,children:"+"}),e.jsx(t,{item:!0,xs:2,marginLeft:"-20px",textAlign:"center",children:e.jsx(a,{readonly:"true",id:"captcha-input1",variant:"outlined",value:h,inputProps:{style:{height:"8px"}}})}),e.jsx(t,{item:!0,fontSize:20,mt:.7,children:"="}),e.jsx(t,{item:!0,xs:3,textAlign:"center",children:e.jsx(a,{value:x,onChange:s=>T(s.target.value),id:"captcha-input1",variant:"outlined",inputProps:{style:{height:"8px"}}})})]})]}),e.jsxs(z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:["Sign Up"," ",l&&e.jsx(W,{animation:"border",className:"mx-2 mb-1",size:"sm"})]}),e.jsx(t,{container:!0,justifyContent:"flex-end",children:e.jsxs(t,{item:!0,children:["Already have an account?",e.jsx(y,{to:"/signin",children:" Sign in"})]})})]})]}),e.jsx(V,{sx:{mt:5}})]})})})}export{ke as default};
