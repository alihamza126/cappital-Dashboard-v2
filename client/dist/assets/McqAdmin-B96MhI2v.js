import{r as c,j as e}from"./react-BLQlKNq_.js";import{e as L,b as R,c as T,p as U,l as B,a as N,d as z,f as A,g as H}from"./index-PS8_ImHQ.js";import{u as P,c as $}from"./notistack-DWKSkMQ9.js";import{C as W,F as s,R as q,a as d,B as J,S as K}from"./react-bootstrap-C0bN-j8n.js";import{I as V,i as X}from"./@mui-DAjQFfGe.js";import"./@babel-HOuxngs4.js";import"./react-dom-DmmE3xc2.js";import"./scheduler-CzFDRTuY.js";import"./react-router-dom-BCp3cZHX.js";import"./react-router-CeklShVs.js";import"./@remix-run-CbFatO5U.js";import"./react-redux-10GvvXuy.js";import"./use-sync-external-store-De7g8zNk.js";import"./axios-Cm0UX6qg.js";import"./@reduxjs-DVdFRU_h.js";import"./redux-DITMfSWq.js";import"./immer-BWU1mfoO.js";import"./reselect-BeKUwQU7.js";import"./redux-thunk-ClJT1hhx.js";import"./react-typed-DYA10Kre.js";import"./typed.js-exEGtOgn.js";import"./react-bootstrap-sweetalert-DQB2ynYp.js";import"./prop-types-C1xvqhu3.js";import"./swiper-DTKdPQEP.js";import"./fslightbox-react-CQdsEJ3s.js";import"./react-lazyload-DZ8paPqQ.js";import"./react-loading-skeleton-D7jF0Q-E.js";import"./goober-DovPBWGu.js";import"./@emotion-C2ZuPDAx.js";import"./hoist-non-react-statics-Buxaj0Kl.js";import"./react-is-8JwjhRSi.js";import"./stylis-NkKAe6Bn.js";import"./clsx-B-dksMZM.js";import"./react-transition-group-DSzsIoyj.js";import"./@popperjs-BQBsAJpH.js";import"./classnames-BfIYw_zE.js";import"./@restart-JOvkJ3VN.js";import"./dom-helpers-nL1pTuZz.js";const Qe=()=>{const[n,g]=c.useState({}),[y,h]=c.useState(L),[r,O]=c.useState("english"),[C,l]=c.useState([]),[j,w]=c.useState(""),[F,b]=c.useState(null),[k,v]=c.useState(""),[G,f]=c.useState(!1),{enqueueSnackbar:D}=P(),m=(t,i)=>{D(t,{variant:i,autoHideDuration:4e3,anchorOrigin:{vertical:"top",horizontal:"center"},action:e.jsx(V,{size:"small","aria-label":"close",color:"inherit",onClick:()=>$(),children:e.jsx(X,{fontSize:"small"})})})},[o,u]=c.useState({question:"",options:["","","",""],correctOption:"",difficulty:"easy",category:"normal",subject:"english",chapter:"",topic:"",course:"nums",info:"",explain:"",imageUrl:""}),p=t=>{const{name:i,value:a}=t.target;if(i.startsWith("option")){const I=parseInt(i.slice(-1))-1,x=[...o.options];x[I]=a,u({...o,options:x})}else u({...o,[i]:a})},E=async t=>{f(!0),t.preventDefault();const i={};if(o.question.trim()||(i.question="Question is required"),o.options.some(a=>!a.trim())&&(i.options="All options are required"),o.correctOption||(i.correctOption="Correct Option is required"),o.chapter.trim()||(i.chapter="Chapter is required"),r!=="logic"&&r!=="english"&&(o.topic.trim()||(i.topic="Topic is required")),Object.keys(i).length===0)if(F)try{const a=new FormData;a.append("image",F);const I={headers:{"Content-Type":"multipart/form-data"}},x=await N.post("/upload/img",a,I);if(x.status===200)try{const S={...o,imageUrl:x.data.fileURL},Y=await N.post("/mcq/add",S);m("MCQ added successfully with Image","success"),f(!1),b(null),v(""),g({}),w(""),l([]),u({...o,question:"",options:["","","",""],correctOption:"",difficulty:"easy",category:"normal",topic:"",chapter:"",explain:"",imageUrl:"",info:""})}catch(S){m(S.message,"error")}else m("Failed to upload image","error")}catch{m("Failed to upload image","error"),f(!1)}else try{await N.post("/mcq/add",o),m("MCQ added successfully without Image","success"),b(null),v(""),g({}),u({...o,question:"",options:["","","",""],correctOption:"",difficulty:"easy",category:"normal",topic:"",chapter:"",explain:"",imageUrl:"",info:""})}catch{m("Failed to add MCQ","error")}else g(i);f(!1)};c.useEffect(()=>{r==="biology"?(h(R),l([])):r==="chemistry"?(h(T),l([])):r==="physics"?(h(U),l([])):r==="logic"?(h(B),l([])):r==="english"&&(h(L),l([]))},[r]),c.useEffect(()=>{if(r==="biology"){const t=z[j];l(t)}else if(r==="chemistry"){const t=A[j];l(t)}else if(r==="physics"){const t=H[j];l(t)}else(r==="logic"||r==="english")&&l([])},[j]);const M=t=>{const i=t.target.files[0],a=new FileReader;a.onload=()=>{v(a.result)},a.readAsDataURL(i),b(i)},Q=t=>{const{name:i,value:a}=t.target;l([]),u({...o,[i]:a,topic:"",chapter:""}),O(t.target.value)};return e.jsxs(W,{children:[e.jsx("h1",{className:"text-primary fw-bold py-2 px-4",children:"MCQ Form"}),e.jsxs(s,{children:[e.jsxs(s.Group,{controlId:"question",children:[e.jsx(s.Label,{className:"fw-bold",children:"Question"}),e.jsx(s.Control,{type:"text",name:"question",value:o.question,onChange:p,isInvalid:!!n.question}),e.jsx(s.Control.Feedback,{type:"invalid",children:n.question})]}),e.jsx("div",{className:"card p-3 my-2 border-primary",children:[1,2,3,4].map(t=>e.jsxs(s.Group,{controlId:`option${t}`,className:"py-1",children:[e.jsxs(s.Label,{children:["Option ",t]}),e.jsx(s.Control,{type:"text",name:`option${t}`,value:o.options[t-1],onChange:p,isInvalid:!!n.options}),e.jsx(s.Control.Feedback,{type:"invalid",children:n.options})]},t))}),e.jsx(q,{className:"py-2",children:e.jsx(d,{children:e.jsxs(s.Group,{controlId:"correctOption",children:[e.jsx(s.Label,{className:"fw-bold",children:"Correct Option No"}),e.jsx(s.Control,{type:"number",min:1,max:4,name:"correctOption",value:o.correctOption,onChange:p,isInvalid:!!n.correctOption}),e.jsx(s.Control.Feedback,{type:"invalid",children:n.correctOption})]})})}),e.jsxs(q,{className:"py-3",children:[e.jsx(d,{md:2,children:e.jsxs(s.Group,{controlId:"difficulty",children:[e.jsx(s.Label,{children:"Difficulty"}),e.jsxs(s.Control,{as:"select",name:"difficulty",value:o.difficulty,onChange:p,children:[e.jsx("option",{value:"easy",children:"Easy"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"hard",children:"Hard"})]})]})}),e.jsx(d,{md:2,children:e.jsxs(s.Group,{controlId:"category",children:[e.jsx(s.Label,{children:"Category"}),e.jsxs(s.Control,{as:"select",name:"category",value:o.category,onChange:p,children:[e.jsx("option",{value:"normal",children:"Normal"}),e.jsx("option",{value:"past",children:"Past"})]})]})}),e.jsx(d,{md:4,children:e.jsxs(s.Group,{controlId:"info",children:[e.jsx(s.Label,{className:"fw-bold",children:"MCQ Info"}),e.jsx(s.Control,{type:"text",maxLength:9,name:"info",placeholder:"For Example Bwp-2021",value:o.info,onChange:p,isInvalid:!!n.info}),e.jsx(s.Control.Feedback,{type:"invalid",children:n.info})]})}),e.jsx(d,{md:4,children:e.jsxs(s.Group,{controlId:"subject",children:[e.jsx(s.Label,{children:"Subject"}),e.jsxs(s.Control,{as:"select",name:"subject",value:o.subject,onChange:Q,children:[e.jsx("option",{value:"english",children:"English"}),e.jsx("option",{value:"chemistry",children:"Chemistry"}),e.jsx("option",{value:"physics",children:"Physics"}),e.jsx("option",{value:"logic",children:"Logic"}),e.jsx("option",{value:"biology",children:"Biology"})]})]})})]}),e.jsxs(q,{className:"py-3",children:[e.jsx(d,{md:2,children:e.jsxs(s.Group,{controlId:"course",children:[e.jsx(s.Label,{children:"Course"}),e.jsxs(s.Control,{as:"select",name:"course",value:o.course,onChange:p,children:[e.jsx("option",{value:"nums",children:"Nums"}),e.jsx("option",{value:"mdcat",children:"Mdcat"})]})]})}),e.jsx(d,{md:5,children:e.jsxs(s.Group,{controlId:"chapter",children:[e.jsx(s.Label,{children:"Chapter"}),e.jsxs(s.Control,{as:"select",placeholder:"Select Chapter",name:"chapter",value:o.chapter,onChange:t=>w(t.target.value),onChangeCapture:p,isInvalid:!!n.chapter,children:[e.jsx("option",{value:"",children:"Select Chapter"}),y==null?void 0:y.map((t,i)=>e.jsx("option",{value:t,children:t},i))]}),e.jsx(s.Control.Feedback,{type:"invalid",children:n.chapter})]})}),e.jsx(d,{md:5,children:e.jsxs(s.Group,{controlId:"topic",children:[e.jsx(s.Label,{children:"Topic"}),e.jsxs(s.Control,{as:"select",name:"topic",value:o.topic,onChange:p,isInvalid:!!n.topic,children:[e.jsx("option",{value:"",children:"Select Topic"}),C==null?void 0:C.map((t,i)=>e.jsx("option",{value:t,children:t},i))]}),e.jsx(s.Control.Feedback,{type:"invalid",children:n.topic})]})})]}),e.jsxs(s.Group,{controlId:"explain",children:[e.jsx(s.Label,{children:"Explanation"}),e.jsx(s.Control,{as:"textarea",name:"explain",value:o.explain,onChange:p})]}),e.jsx("div",{className:"row py-1 my-3",children:e.jsx("div",{className:"col-md-12 col-12 mb-4",children:e.jsxs("div",{className:"p-1 d-flex gap-2",children:[e.jsxs("div",{className:"row justify-content-center",children:[e.jsx("input",{id:"file",type:"file",hidden:!0,accept:"image/*",onChange:M}),e.jsx("label",{htmlFor:"file",name:"file",className:"d-flex justify-content-center",children:e.jsx("span",{className:"btn btn-secondary btn-sm w-100 px-5 mt- h-25",children:"Select Image"})})]}),e.jsx("img",{height:150,src:k,alt:"Image not selected",className:"border border-primary rounded-2 overflow-hidden"})]})})}),e.jsxs(J,{variant:"primary",className:"px-5 fw-bold",type:"submit",onClick:E,children:["Submit ",G&&e.jsx(K,{className:"ms-1",size:"sm"})]})]})]})};export{Qe as default};
