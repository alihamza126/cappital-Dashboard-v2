import{r as s,j as e}from"./react-BLQlKNq_.js";import{u as y}from"./notistack-DWKSkMQ9.js";import{a as o}from"./index-DZ2TZcCs.js";import{G as c,R as i}from"./@mui-Bw2wRnxu.js";import"./@babel-HOuxngs4.js";import"./react-dom-DmmE3xc2.js";import"./scheduler-CzFDRTuY.js";import"./goober-DovPBWGu.js";import"./react-router-dom-BCp3cZHX.js";import"./react-router-CeklShVs.js";import"./@remix-run-CbFatO5U.js";import"./react-redux-10GvvXuy.js";import"./use-sync-external-store-De7g8zNk.js";import"./axios-Cm0UX6qg.js";import"./@reduxjs-DVdFRU_h.js";import"./redux-DITMfSWq.js";import"./immer-BWU1mfoO.js";import"./reselect-BeKUwQU7.js";import"./redux-thunk-ClJT1hhx.js";import"./react-typed-DYA10Kre.js";import"./typed.js-exEGtOgn.js";import"./react-bootstrap-sweetalert-DQB2ynYp.js";import"./prop-types-C1xvqhu3.js";import"./swiper-DTKdPQEP.js";import"./fslightbox-react-CQdsEJ3s.js";import"./yet-another-react-lightbox-DocsD2co.js";import"./react-bootstrap-C0bN-j8n.js";import"./classnames-BfIYw_zE.js";import"./@restart-JOvkJ3VN.js";import"./dom-helpers-nL1pTuZz.js";import"./react-transition-group-DSzsIoyj.js";import"./react-lazyload-DZ8paPqQ.js";import"./react-loading-skeleton-D7jF0Q-E.js";import"./@emotion-C2ZuPDAx.js";import"./hoist-non-react-statics-Buxaj0Kl.js";import"./react-is-8JwjhRSi.js";import"./stylis-NkKAe6Bn.js";import"./clsx-B-dksMZM.js";import"./@popperjs-BQBsAJpH.js";const de=()=>{const[d,m]=s.useState(""),[p,h]=s.useState(""),[u,x]=s.useState(""),[j,f]=s.useState([]),[a,n]=s.useState(!1),{enqueueSnackbar:l}=y(),D=t=>{const r=new Date,v=new Date(t)-r;return Math.ceil(v/(1e3*60*60*24))},b=async()=>{try{const t=await o.post("/referal",{code:d,priceDiscount:p,expireDate:u});n(!a),l("Referral code added successfully",{variant:"success",autoHideDuration:2e3})}catch(t){console.log(t)}},g=t=>async()=>{try{const r=await o.delete(`/referal/${t}`);n(!a),l("Referral code removed successfully",{variant:"warning",autoHideDuration:2e3})}catch(r){console.log(r)}};return s.useEffect(()=>{(async()=>{const r=await o.get("/referal");f(r.data),console.log(r.data)})()},[a]),e.jsxs("div",{className:"refrell-code",children:[e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"row my-3",children:e.jsx("div",{className:"h2 text-primary fw-bold",children:"Referrals code"})}),e.jsxs("div",{className:"row gy-4",children:[e.jsx("div",{className:"col-md-4",children:e.jsx(c,{fullWidth:!0,children:e.jsx(i,{label:"Referral Code",onChange:t=>m(t.target.value)})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(c,{fullWidth:!0,children:e.jsx(i,{label:"Discount Percentage",type:"number",onChange:t=>h(t.target.value)})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(c,{fullWidth:!0,children:e.jsx(i,{label:"Expiration Date",type:"date",InputLabelProps:{shrink:!0},onChange:t=>x(t.target.value)})})})]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-4 py-4",children:e.jsx("button",{className:"btn btn-primary",onClick:b,children:"Add Referral"})})})]}),e.jsx("div",{className:"container table-responsive mt-5 pt-1",children:e.jsxs("table",{className:"table table-striped table-hover table-secondary rounded-4 shadow",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-warning",children:[e.jsx("th",{scope:"col",children:"Referral Code"}),e.jsx("th",{scope:"col",children:"Discount"}),e.jsx("th",{scope:"col",children:"Expiration Date"}),e.jsx("th",{scope:"col",children:"Total Purchases"}),e.jsx("th",{scope:"col",children:"Days Left"}),e.jsx("th",{scope:"col",children:"Remove"})]})}),e.jsx("tbody",{children:j.map((t,r)=>e.jsxs("tr",{children:[e.jsx("td",{children:t.code}),e.jsxs("td",{children:[t.priceDiscount,"%"]}),e.jsx("td",{children:new Date(t.expireDate).toLocaleDateString()}),e.jsx("td",{children:t==null?void 0:t.purchaseCount}),e.jsx("td",{children:D(t.expireDate)}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-danger btn-sm rounded-2",onClick:g(t._id),children:"Remove"})})]},r))})]})})]})};export{de as default};
