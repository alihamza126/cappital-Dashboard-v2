import{r as c,j as e}from"./react-BLQlKNq_.js";import{a as p}from"./index-D821ScgY.js";import{u as R}from"./notistack-DWKSkMQ9.js";import{B as m,M as i,F as t,S as _}from"./react-bootstrap-C0bN-j8n.js";import{ac as S}from"./@mui-DAjQFfGe.js";import"./@babel-HOuxngs4.js";import"./react-dom-DmmE3xc2.js";import"./scheduler-CzFDRTuY.js";import"./react-router-dom-BCp3cZHX.js";import"./react-router-CeklShVs.js";import"./@remix-run-CbFatO5U.js";import"./react-redux-10GvvXuy.js";import"./use-sync-external-store-De7g8zNk.js";import"./axios-Cm0UX6qg.js";import"./@reduxjs-DVdFRU_h.js";import"./redux-DITMfSWq.js";import"./immer-BWU1mfoO.js";import"./reselect-BeKUwQU7.js";import"./redux-thunk-ClJT1hhx.js";import"./react-typed-DYA10Kre.js";import"./typed.js-exEGtOgn.js";import"./react-bootstrap-sweetalert-DQB2ynYp.js";import"./prop-types-C1xvqhu3.js";import"./swiper-DTKdPQEP.js";import"./fslightbox-react-CQdsEJ3s.js";import"./react-lazyload-DZ8paPqQ.js";import"./react-loading-skeleton-D7jF0Q-E.js";import"./goober-DovPBWGu.js";import"./@emotion-C2ZuPDAx.js";import"./hoist-non-react-statics-Buxaj0Kl.js";import"./react-is-8JwjhRSi.js";import"./stylis-NkKAe6Bn.js";import"./clsx-B-dksMZM.js";import"./react-transition-group-DSzsIoyj.js";import"./@popperjs-BQBsAJpH.js";import"./classnames-BfIYw_zE.js";import"./@restart-JOvkJ3VN.js";import"./dom-helpers-nL1pTuZz.js";const he=()=>{const[w,r]=c.useState(!1),[o,d]=c.useState(!1),{enqueueSnackbar:l}=R(),[j,y]=c.useState([]),[f,v]=c.useState(!1),[g,u]=c.useState(!1),[a,n]=c.useState({name:"",comment:"",city:"",id:""}),C=async()=>{y([...j,a]),n({name:"",comment:"",city:""}),v(!1);try{r(!0),await p.post("/reviews/new",a),l("Review added successfully",{variant:"success",autoHideDuration:1500}),r(!1),d(!o)}catch{l("Something went Wrong",{variant:"error",autoHideDuration:1500}),r(!1),d(!o)}},N=async s=>{try{r(!0),await p.delete(`/reviews/${s}`),l("Review Deleted successfully",{variant:"warning",autoHideDuration:1500}),r(!1),d(!o)}catch{l("Something went Wrong",{variant:"error",autoHideDuration:1500}),r(!1),d(!o)}},b=async()=>{try{r(!0),await p.put(`/reviews/${a.id}`,a),l("Review Updated successfully",{variant:"success",autoHideDuration:1500}),r(!1),d(!o)}catch{l("Something went Wrong",{variant:"error",autoHideDuration:1500}),r(!1),d(!o)}n({name:"",comment:"",city:""}),u(!1)};return c.useEffect(()=>{(async()=>{try{const h=await p.get("/reviews");y(h.data),r(!1)}catch{l("Something went Wrong",{variant:"error",autoHideDuration:1500})}})()},[o]),e.jsxs("div",{className:"admin-reviews ",children:[e.jsxs("div",{className:"container d-flex justify-content-between my-3",children:[e.jsxs("h3",{className:"fw-bold text-primary",children:["Reviews(",j.length,")"]}),e.jsx(m,{variant:"success",style:{height:"80%",fontWeight:"bold"},size:"sm",onClick:()=>v(!0),children:"Add Review"})]}),e.jsx("div",{className:"admin-reviews__container p-4",style:{height:"90vh",overflow:"scroll"},children:j.map((s,h)=>e.jsx("div",{className:"admin-reviews__container__review shadow-lg border border-primary rounded-2 my-4 py-2",children:e.jsxs("div",{className:"container",children:[e.jsx(S,{style:{color:"skyblue"}})," ",e.jsx("strong",{children:h+1}),e.jsxs("div",{className:"admin-reviews__container__review__name",children:[e.jsx("label",{htmlFor:"name",className:"fw-bold text-success mt-2 me-2",children:"Name :"}),e.jsx("strong",{children:s.name})]}),e.jsxs("div",{className:"admin-reviews__container__review__name",children:[e.jsx("label",{htmlFor:"comment",className:"fw-bold text-primary mt-2 me-2",children:"Review:"}),e.jsx("textarea",{readOnly:!0,cols:"30",rows:"3",className:"form-control",style:{resize:"none"},children:s.comment})]}),e.jsxs("div",{className:"admin-reviews__container__review__name",children:[e.jsx("label",{htmlFor:"comment",className:"fw-bold text-info mt-2 me-2",children:"City:"}),e.jsx("strong",{children:s.city})]}),e.jsx("div",{className:"admin-reviews__container__review__city mb-3"}),e.jsx("div",{className:"admin-reviews__container__review__edit"}),e.jsx(m,{variant:"primary",size:"sm",onClick:()=>{u(!0),n({name:s.name,comment:s.comment,city:s.city,id:s._id})},children:"Edit"}),e.jsxs(i,{show:g,onHide:()=>u(!1),children:[e.jsx(i.Header,{closeButton:!0,children:e.jsx(i.Title,{children:"Edit Review"})}),e.jsx(i.Body,{children:e.jsxs(t,{children:[e.jsxs(t.Group,{controlId:"name",children:[e.jsx(t.Label,{children:"Name"}),e.jsx(t.Control,{type:"text",value:a.name,onChange:x=>n({...a,name:x.target.value})})]}),e.jsxs(t.Group,{controlId:"comment",children:[e.jsx(t.Label,{children:"Comment"}),e.jsx(t.Control,{as:"textarea",rows:3,value:a.comment,onChange:x=>n({...a,comment:x.target.value})})]}),e.jsxs(t.Group,{controlId:"city",children:[e.jsx(t.Label,{children:"City"}),e.jsx(t.Control,{type:"text",value:a.city,onChange:x=>n({...a,city:x.target.value})})]})]})}),e.jsxs(i.Footer,{children:[e.jsx(m,{variant:"secondary",onClick:()=>u(!1),children:"Cancel"}),e.jsxs(m,{variant:"primary",onClick:()=>b(),children:["Save Changes",w&&e.jsx(_,{animation:"border",size:"sm",variant:"light",className:"ms-1"})]})]})]}),e.jsx("div",{className:"admin-reviews__container__review__delete d-inline ms-3",children:e.jsx(m,{variant:"danger",size:"sm",onClick:()=>N(s._id),children:"Delete"})})]})},h))}),e.jsxs(i,{show:f,onHide:()=>v(!1),children:[e.jsx(i.Header,{closeButton:!0,children:e.jsx(i.Title,{children:"Add Review"})}),e.jsx(i.Body,{children:e.jsxs(t,{children:[e.jsxs(t.Group,{controlId:"name",className:"my-2",children:[e.jsx(t.Label,{children:"Name"}),e.jsx(t.Control,{type:"text",value:a.name,onChange:s=>n({...a,name:s.target.value})})]}),e.jsxs(t.Group,{controlId:"comment",className:"my-2",children:[e.jsx(t.Label,{children:"Comment"}),e.jsx(t.Control,{as:"textarea",rows:3,value:a.comment,onChange:s=>n({...a,comment:s.target.value})})]}),e.jsxs(t.Group,{controlId:"city",className:"my-2",children:[e.jsx(t.Label,{children:"City"}),e.jsx(t.Control,{type:"text",value:a.city,onChange:s=>n({...a,city:s.target.value})})]})]})}),e.jsxs(i.Footer,{children:[e.jsx(m,{variant:"secondary",onClick:()=>v(!1),children:"Cancel"}),e.jsxs(m,{variant:"primary",onClick:C,children:["Add Review",w&&e.jsx(_,{animation:"border",size:"sm",variant:"light",className:"ms-1"})]})]})]})]})};export{he as default};
