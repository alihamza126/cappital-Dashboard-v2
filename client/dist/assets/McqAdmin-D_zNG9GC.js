import{r as a,j as e}from"./react-BLQlKNq_.js";import{e as M,b as K,c as V,p as X,l as Y,a as S,d as Z,f as _,g as ee}from"./index-DZ2TZcCs.js";import{u as se,c as te}from"./notistack-DWKSkMQ9.js";import{L as oe}from"./yet-another-react-lightbox-DocsD2co.js";import{C as ie,F as s,R as w,a as h,B as ae,S as ne}from"./react-bootstrap-C0bN-j8n.js";import{I as re,i as le}from"./@mui-Bw2wRnxu.js";import"./@babel-HOuxngs4.js";import"./react-dom-DmmE3xc2.js";import"./scheduler-CzFDRTuY.js";import"./react-router-dom-BCp3cZHX.js";import"./react-router-CeklShVs.js";import"./@remix-run-CbFatO5U.js";import"./react-redux-10GvvXuy.js";import"./use-sync-external-store-De7g8zNk.js";import"./axios-Cm0UX6qg.js";import"./@reduxjs-DVdFRU_h.js";import"./redux-DITMfSWq.js";import"./immer-BWU1mfoO.js";import"./reselect-BeKUwQU7.js";import"./redux-thunk-ClJT1hhx.js";import"./react-typed-DYA10Kre.js";import"./typed.js-exEGtOgn.js";import"./react-bootstrap-sweetalert-DQB2ynYp.js";import"./prop-types-C1xvqhu3.js";import"./swiper-DTKdPQEP.js";import"./fslightbox-react-CQdsEJ3s.js";import"./react-lazyload-DZ8paPqQ.js";import"./react-loading-skeleton-D7jF0Q-E.js";import"./goober-DovPBWGu.js";import"./@emotion-C2ZuPDAx.js";import"./hoist-non-react-statics-Buxaj0Kl.js";import"./react-is-8JwjhRSi.js";import"./stylis-NkKAe6Bn.js";import"./clsx-B-dksMZM.js";import"./react-transition-group-DSzsIoyj.js";import"./@popperjs-BQBsAJpH.js";import"./classnames-BfIYw_zE.js";import"./@restart-JOvkJ3VN.js";import"./dom-helpers-nL1pTuZz.js";const Ve=()=>{const[r,L]=a.useState({}),[C,u]=a.useState(M),[n,B]=a.useState("english"),[v,l]=a.useState([]),[f,F]=a.useState(""),[O,k]=a.useState(null),[I,Q]=a.useState(""),[E,U]=a.useState(null),[N,D]=a.useState(""),[z,g]=a.useState(!1),[A,G]=a.useState(!1),[H,P]=a.useState([]),{enqueueSnackbar:$}=se(),y=(t,o)=>{$(t,{variant:o,autoHideDuration:4e3,anchorOrigin:{vertical:"top",horizontal:"center"},action:e.jsx(re,{size:"small","aria-label":"close",color:"inherit",onClick:()=>te(),children:e.jsx(le,{fontSize:"small"})})})},[i,b]=a.useState({question:"",options:["","","",""],correctOption:"",difficulty:"easy",category:"normal",subject:"english",chapter:"",topic:"",course:"nums",info:"",explain:"",imageUrl:"",questionImg:""}),p=t=>{const{name:o,value:c}=t.target;if(o.startsWith("option")){const m=parseInt(o.slice(-1))-1,d=[...i.options];d[m]=c,b({...i,options:d})}else b({...i,[o]:c})},W=async t=>{var c,m;g(!0),t.preventDefault();const o={};if(i.question.trim()||(o.question="Question is required"),i.options.some(d=>!d.trim())&&(o.options="All options are required"),i.correctOption||(o.correctOption="Correct Option is required"),i.chapter.trim()||(o.chapter="Chapter is required"),n!=="logic"&&n!=="english"&&(i.topic.trim()||(o.topic="Topic is required")),Object.keys(o).length===0)try{let d={...i};if(O){const x=new FormData;x.append("image",O);const q={headers:{"Content-Type":"multipart/form-data"}},j=await S.post("/upload/img",x,q);if(j.status===200)d.imageUrl=j.data.fileURL;else{y("Failed to upload Explanation Image","error"),g(!1);return}}if(E){const x=new FormData;x.append("image",E);const q={headers:{"Content-Type":"multipart/form-data"}},j=await S.post("/upload/img",x,q);if(j.status===200)d.questionImg=j.data.fileURL;else{y("Failed to upload question image","error"),g(!1);return}}const ce=await S.post("/mcq/add",d);y("MCQ added successfully","success"),k(null),Q(""),U(null),D(""),L({}),F(""),l([]),b({question:"",options:["","","",""],correctOption:"",difficulty:"easy",category:"normal",topic:"",chapter:"",explain:"",imageUrl:"",questionImg:"",info:""})}catch(d){y(((m=(c=d.response)==null?void 0:c.data)==null?void 0:m.error)||"Failed to add MCQ","error")}else L(o);g(!1)};a.useEffect(()=>{n==="biology"?(u(K),l([])):n==="chemistry"?(u(V),l([])):n==="physics"?(u(X),l([])):n==="logic"?(u(Y),l([])):n==="english"&&(u(M),l([]))},[n]),a.useEffect(()=>{if(n==="biology"){const t=Z[f];l(t)}else if(n==="chemistry"){const t=_[f];l(t)}else if(n==="physics"){const t=ee[f];l(t)}else(n==="logic"||n==="english")&&l([])},[f]);const R=(t,o)=>{const c=t.target.files[0],m=new FileReader;m.onload=()=>{o==="mcq"?(Q(m.result),k(c)):o==="question"&&(D(m.result),U(c))},m.readAsDataURL(c)},J=t=>{const{name:o,value:c}=t.target;l([]),b({...i,[o]:c,topic:"",chapter:""}),B(t.target.value)},T=(t,o=0)=>{P(t),G(!0)};return e.jsxs(ie,{children:[e.jsx("h1",{className:"text-primary fw-bold py-2 px-4",children:"MCQ Form"}),e.jsxs(s,{children:[e.jsxs(s.Group,{controlId:"question",children:[e.jsx(s.Label,{className:"fw-bold",children:"Question"}),e.jsx(s.Control,{type:"text",name:"question",value:i.question,onChange:p,isInvalid:!!r.question}),e.jsx(s.Control.Feedback,{type:"invalid",children:r.question})]}),e.jsx("div",{className:"card p-3 my-2 border-primary",children:[1,2,3,4].map(t=>e.jsxs(s.Group,{controlId:`option${t}`,className:"py-1",children:[e.jsxs(s.Label,{children:["Option ",t]}),e.jsx(s.Control,{type:"text",name:`option${t}`,value:i.options[t-1],onChange:p,isInvalid:!!r.options}),e.jsx(s.Control.Feedback,{type:"invalid",children:r.options})]},t))}),e.jsx(w,{className:"py-2",children:e.jsx(h,{children:e.jsxs(s.Group,{controlId:"correctOption",children:[e.jsx(s.Label,{className:"fw-bold",children:"Correct Option No"}),e.jsx(s.Control,{type:"number",min:1,max:4,name:"correctOption",value:i.correctOption,onChange:p,isInvalid:!!r.correctOption}),e.jsx(s.Control.Feedback,{type:"invalid",children:r.correctOption})]})})}),e.jsxs(w,{className:"py-3",children:[e.jsx(h,{md:2,children:e.jsxs(s.Group,{controlId:"difficulty",children:[e.jsx(s.Label,{children:"Difficulty"}),e.jsxs(s.Control,{as:"select",name:"difficulty",value:i.difficulty,onChange:p,children:[e.jsx("option",{value:"easy",children:"Easy"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"hard",children:"Hard"})]})]})}),e.jsx(h,{md:2,children:e.jsxs(s.Group,{controlId:"category",children:[e.jsx(s.Label,{children:"Category"}),e.jsxs(s.Control,{as:"select",name:"category",value:i.category,onChange:p,children:[e.jsx("option",{value:"normal",children:"Normal"}),e.jsx("option",{value:"past",children:"Past"})]})]})}),e.jsx(h,{md:4,children:e.jsxs(s.Group,{controlId:"info",children:[e.jsx(s.Label,{className:"fw-bold",children:"MCQ Info"}),e.jsx(s.Control,{type:"text",maxLength:9,name:"info",placeholder:"For Example Bwp-2021",value:i.info,onChange:p,isInvalid:!!r.info}),e.jsx(s.Control.Feedback,{type:"invalid",children:r.info})]})}),e.jsx(h,{md:4,children:e.jsxs(s.Group,{controlId:"subject",children:[e.jsx(s.Label,{children:"Subject"}),e.jsxs(s.Control,{as:"select",name:"subject",value:i.subject,onChange:J,children:[e.jsx("option",{value:"english",children:"English"}),e.jsx("option",{value:"chemistry",children:"Chemistry"}),e.jsx("option",{value:"physics",children:"Physics"}),e.jsx("option",{value:"logic",children:"Logic"}),e.jsx("option",{value:"biology",children:"Biology"})]})]})})]}),e.jsxs(w,{className:"py-3",children:[e.jsx(h,{md:2,children:e.jsxs(s.Group,{controlId:"course",children:[e.jsx(s.Label,{children:"Course"}),e.jsxs(s.Control,{as:"select",name:"course",value:i.course,onChange:p,children:[e.jsx("option",{value:"nums",children:"Nums"}),e.jsx("option",{value:"mdcat",children:"Mdcat"})]})]})}),e.jsx(h,{md:5,children:e.jsxs(s.Group,{controlId:"chapter",children:[e.jsx(s.Label,{children:"Chapter"}),e.jsxs(s.Control,{as:"select",placeholder:"Select Chapter",name:"chapter",value:i.chapter,onChange:t=>F(t.target.value),onChangeCapture:p,isInvalid:!!r.chapter,children:[e.jsx("option",{value:"",children:"Select Chapter"}),C==null?void 0:C.map((t,o)=>e.jsx("option",{value:t,children:t},o))]}),e.jsx(s.Control.Feedback,{type:"invalid",children:r.chapter})]})}),e.jsx(h,{md:5,children:e.jsxs(s.Group,{controlId:"topic",children:[e.jsx(s.Label,{children:"Topic"}),e.jsxs(s.Control,{as:"select",name:"topic",value:i.topic,onChange:p,isInvalid:!!r.topic,children:[e.jsx("option",{value:"",children:"Select Topic"}),v==null?void 0:v.map((t,o)=>e.jsx("option",{value:t,children:t},o))]}),e.jsx(s.Control.Feedback,{type:"invalid",children:r.topic})]})})]}),e.jsxs(s.Group,{controlId:"explain",children:[e.jsx(s.Label,{children:"Explanation"}),e.jsx(s.Control,{as:"textarea",name:"explain",value:i.explain,onChange:p})]}),e.jsxs("div",{className:"row py-1 my-3",children:[e.jsxs("div",{className:"col-md-6 col-12 mb-4",children:[e.jsx("h6",{className:"fw-bold text-primary",children:"Explanation Image"}),e.jsxs("div",{className:"p-1 d-flex gap-2",children:[e.jsxs("div",{className:"row justify-content-center",children:[e.jsx("input",{id:"mcq-file",type:"file",hidden:!0,accept:"image/*",onChange:t=>R(t,"mcq")}),e.jsx("label",{htmlFor:"mcq-file",name:"file",className:"d-flex justify-content-center",children:e.jsx("span",{className:"btn btn-secondary btn-sm w-100 px-3",children:"Upload Explanation Image"})})]}),I&&e.jsx("img",{height:150,src:I,alt:"MCQ Image",className:"border border-primary rounded-2 overflow-hidden cursor-pointer",style:{cursor:"pointer"},onClick:()=>T([{src:I}],0)})]})]}),e.jsxs("div",{className:"col-md-6 col-12 mb-4",children:[e.jsx("h6",{className:"fw-bold text-primary",children:"Question Image"}),e.jsxs("div",{className:"p-1 d-flex gap-2",children:[e.jsxs("div",{className:"row justify-content-center",children:[e.jsx("input",{id:"question-file",type:"file",hidden:!0,accept:"image/*",onChange:t=>R(t,"question")}),e.jsx("label",{htmlFor:"question-file",name:"file",className:"d-flex justify-content-center",children:e.jsx("span",{className:"btn btn-secondary btn-sm w-100 px-3",children:"Upload Question Image"})})]}),N&&e.jsx("img",{height:150,src:N,alt:"Question Image",className:"border border-primary rounded-2 overflow-hidden cursor-pointer",style:{cursor:"pointer"},onClick:()=>T([{src:N}],0)})]})]})]}),e.jsxs(ae,{variant:"primary",className:"px-5 fw-bold",type:"submit",onClick:W,children:["Submit ",z&&e.jsx(ne,{className:"ms-1",size:"sm"})]})]}),e.jsx(oe,{open:A,close:()=>G(!1),slides:H})]})};export{Ve as default};
