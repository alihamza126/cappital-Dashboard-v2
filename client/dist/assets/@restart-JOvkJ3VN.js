import{r as i,j as E}from"./react-BLQlKNq_.js";import{c as $,s as J,o as ve,a as I,l as Q,b as Y}from"./dom-helpers-nL1pTuZz.js";import{R as xe}from"./react-dom-DmmE3xc2.js";const Z=e=>!e||typeof e=="function"?e:n=>{e.current=n};function Re(e,n){const t=Z(e),o=Z(n);return r=>{t&&t(r),o&&o(r)}}function H(e,n){return i.useMemo(()=>Re(e,n),[e,n])}function ye(e){const n=i.useRef(e);return i.useEffect(()=>{n.current=e},[e]),n}function p(e){const n=ye(e);return i.useCallback(function(...t){return n.current&&n.current(...t)},[n])}function on(){return i.useState(null)}function ke(){const e=i.useRef(!0),n=i.useRef(()=>e.current);return i.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),n.current}function we(e){const n=i.useRef(null);return i.useEffect(()=>{n.current=e}),n.current}const Oe=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",Te=typeof document<"u",ee=Te||Oe?i.useLayoutEffect:i.useEffect,je=["as","disabled"];function Ce(e,n){if(e==null)return{};var t={},o=Object.keys(e),r,s;for(s=0;s<o.length;s++)r=o[s],!(n.indexOf(r)>=0)&&(t[r]=e[r]);return t}function Me(e){return!e||e.trim()==="#"}function De({tagName:e,disabled:n,href:t,target:o,rel:r,role:s,onClick:a,tabIndex:f=0,type:m}){e||(t!=null||o!=null||r!=null?e="a":e="button");const c={tagName:e};if(e==="button")return[{type:m||"button",disabled:n},c];const h=l=>{if((n||e==="a"&&Me(t))&&l.preventDefault(),n){l.stopPropagation();return}a==null||a(l)},g=l=>{l.key===" "&&(l.preventDefault(),h(l))};return e==="a"&&(t||(t="#"),n&&(t=void 0)),[{role:s??"button",disabled:void 0,tabIndex:n?void 0:f,href:t,target:e==="a"?o:void 0,"aria-disabled":n||void 0,rel:e==="a"?r:void 0,onClick:h,onKeyDown:g},c]}const Be=i.forwardRef((e,n)=>{let{as:t,disabled:o}=e,r=Ce(e,je);const[s,{tagName:a}]=De(Object.assign({tagName:t,disabled:o},r));return E.jsx(a,Object.assign({},r,s,{ref:n}))});Be.displayName="Button";function We(e){const n=i.useRef(e);return n.current=e,n}function Fe(e){const n=We(e);i.useEffect(()=>()=>n.current(),[])}const Se="data-rr-ui-";function Le(e){return`${Se}${e}`}const oe=i.createContext($?window:void 0);oe.Provider;function U(){return i.useContext(oe)}function Ae(e=document){const n=e.defaultView;return Math.abs(n.innerWidth-e.documentElement.clientWidth)}const ne=Le("modal-open");class Ie{constructor({ownerDocument:n,handleContainerOverflow:t=!0,isRTL:o=!1}={}){this.handleContainerOverflow=t,this.isRTL=o,this.modals=[],this.ownerDocument=n}getScrollbarWidth(){return Ae(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(n){}removeModalAttributes(n){}setContainerStyle(n){const t={overflow:"hidden"},o=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();n.style={overflow:r.style.overflow,[o]:r.style[o]},n.scrollBarWidth&&(t[o]=`${parseInt(J(r,o)||"0",10)+n.scrollBarWidth}px`),r.setAttribute(ne,""),J(r,t)}reset(){[...this.modals].forEach(n=>this.remove(n))}removeContainerStyle(n){const t=this.getElement();t.removeAttribute(ne),Object.assign(t.style,n.style)}add(n){let t=this.modals.indexOf(n);return t!==-1||(t=this.modals.length,this.modals.push(n),this.setModalAttributes(n),t!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t}remove(n){const t=this.modals.indexOf(n);t!==-1&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(n))}isTopModal(n){return!!this.modals.length&&this.modals[this.modals.length-1]===n}}const re=Ie,P=(e,n)=>$?e==null?(n||ve()).body:(typeof e=="function"&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;function Pe(e,n){const t=U(),[o,r]=i.useState(()=>P(e,t==null?void 0:t.document));if(!o){const s=P(e);s&&r(s)}return i.useEffect(()=>{n&&o&&n(o)},[n,o]),i.useEffect(()=>{const s=P(e);s!==o&&r(s)},[e,o]),o}function Ke({children:e,in:n,onExited:t,mountOnEnter:o,unmountOnExit:r}){const s=i.useRef(null),a=i.useRef(n),f=p(t);i.useEffect(()=>{n?a.current=!0:f(s.current)},[n,f]);const m=H(s,e.ref),c=i.cloneElement(e,{ref:m});return n?c:r||!a.current&&o?null:c}const $e=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function He(e,n){if(e==null)return{};var t={},o=Object.keys(e),r,s;for(s=0;s<o.length;s++)r=o[s],!(n.indexOf(r)>=0)&&(t[r]=e[r]);return t}function Ue(e){let{onEnter:n,onEntering:t,onEntered:o,onExit:r,onExiting:s,onExited:a,addEndListener:f,children:m}=e,c=He(e,$e);const h=i.useRef(null),g=H(h,typeof m=="function"?null:m.ref),l=b=>x=>{b&&h.current&&b(h.current,x)},O=i.useCallback(l(n),[n]),T=i.useCallback(l(t),[t]),j=i.useCallback(l(o),[o]),C=i.useCallback(l(r),[r]),M=i.useCallback(l(s),[s]),D=i.useCallback(l(a),[a]),R=i.useCallback(l(f),[f]);return Object.assign({},c,{nodeRef:h},n&&{onEnter:O},t&&{onEntering:T},o&&{onEntered:j},r&&{onExit:C},s&&{onExiting:M},a&&{onExited:D},f&&{addEndListener:R},{children:typeof m=="function"?(b,x)=>m(b,Object.assign({},x,{ref:g})):i.cloneElement(m,{ref:g})})}const _e=["component"];function Ge(e,n){if(e==null)return{};var t={},o=Object.keys(e),r,s;for(s=0;s<o.length;s++)r=o[s],!(n.indexOf(r)>=0)&&(t[r]=e[r]);return t}const Ne=i.forwardRef((e,n)=>{let{component:t}=e,o=Ge(e,_e);const r=Ue(o);return E.jsx(t,Object.assign({ref:n},r))}),ze=Ne;function Ve({in:e,onTransition:n}){const t=i.useRef(null),o=i.useRef(!0),r=p(n);return ee(()=>{if(!t.current)return;let s=!1;return r({in:e,element:t.current,initial:o.current,isStale:()=>s}),()=>{s=!0}},[e,r]),ee(()=>(o.current=!1,()=>{o.current=!0}),[]),t}function Xe({children:e,in:n,onExited:t,onEntered:o,transition:r}){const[s,a]=i.useState(!n);n&&s&&a(!1);const f=Ve({in:!!n,onTransition:c=>{const h=()=>{c.isStale()||(c.in?o==null||o(c.element,c.initial):(a(!0),t==null||t(c.element)))};Promise.resolve(r(c)).then(h,g=>{throw c.in||a(!0),g})}}),m=H(f,e.ref);return s&&!n?null:i.cloneElement(e,{ref:m})}function te(e,n,t){return e?E.jsx(ze,Object.assign({},t,{component:e})):n?E.jsx(Xe,Object.assign({},t,{transition:n})):E.jsx(Ke,Object.assign({},t))}function qe(e){return e.code==="Escape"||e.keyCode===27}const Je=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function Qe(e,n){if(e==null)return{};var t={},o=Object.keys(e),r,s;for(s=0;s<o.length;s++)r=o[s],!(n.indexOf(r)>=0)&&(t[r]=e[r]);return t}let K;function Ye(e){return K||(K=new re({ownerDocument:e==null?void 0:e.document})),K}function Ze(e){const n=U(),t=e||Ye(n),o=i.useRef({dialog:null,backdrop:null});return Object.assign(o.current,{add:()=>t.add(o.current),remove:()=>t.remove(o.current),isTopModal:()=>t.isTopModal(o.current),setDialogRef:i.useCallback(r=>{o.current.dialog=r},[]),setBackdropRef:i.useCallback(r=>{o.current.backdrop=r},[])})}const ie=i.forwardRef((e,n)=>{let{show:t=!1,role:o="dialog",className:r,style:s,children:a,backdrop:f=!0,keyboard:m=!0,onBackdropClick:c,onEscapeKeyDown:h,transition:g,runTransition:l,backdropTransition:O,runBackdropTransition:T,autoFocus:j=!0,enforceFocus:C=!0,restoreFocus:M=!0,restoreFocusOptions:D,renderDialog:R,renderBackdrop:b=u=>E.jsx("div",Object.assign({},u)),manager:x,container:se,onShow:_,onHide:G=()=>{},onExit:ue,onExited:N,onExiting:ce,onEnter:ae,onEntering:le,onEntered:de}=e,fe=Qe(e,Je);const v=U(),y=Pe(se),d=Ze(x),me=ke(),he=we(t),[B,z]=i.useState(!t),k=i.useRef(null);i.useImperativeHandle(n,()=>d,[d]),$&&!he&&t&&(k.current=I(v==null?void 0:v.document)),t&&B&&z(!1);const V=p(()=>{if(d.add(),S.current=Q(document,"keydown",pe),F.current=Q(document,"focus",()=>setTimeout(Ee),!0),_&&_(),j){var u,q;const A=I((u=(q=d.dialog)==null?void 0:q.ownerDocument)!=null?u:v==null?void 0:v.document);d.dialog&&A&&!Y(d.dialog,A)&&(k.current=A,d.dialog.focus())}}),W=p(()=>{if(d.remove(),S.current==null||S.current(),F.current==null||F.current(),M){var u;(u=k.current)==null||u.focus==null||u.focus(D),k.current=null}});i.useEffect(()=>{!t||!y||V()},[t,y,V]),i.useEffect(()=>{B&&W()},[B,W]),Fe(()=>{W()});const Ee=p(()=>{if(!C||!me()||!d.isTopModal())return;const u=I(v==null?void 0:v.document);d.dialog&&u&&!Y(d.dialog,u)&&d.dialog.focus()}),ge=p(u=>{u.target===u.currentTarget&&(c==null||c(u),f===!0&&G())}),pe=p(u=>{m&&qe(u)&&d.isTopModal()&&(h==null||h(u),u.defaultPrevented||G())}),F=i.useRef(),S=i.useRef(),be=(...u)=>{z(!0),N==null||N(...u)};if(!y)return null;const X=Object.assign({role:o,ref:d.setDialogRef,"aria-modal":o==="dialog"?!0:void 0},fe,{style:s,className:r,tabIndex:-1});let L=R?R(X):E.jsx("div",Object.assign({},X,{children:i.cloneElement(a,{role:"document"})}));L=te(g,l,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!t,onExit:ue,onExiting:ce,onExited:be,onEnter:ae,onEntering:le,onEntered:de,children:L});let w=null;return f&&(w=b({ref:d.setBackdropRef,onClick:ge}),w=te(O,T,{in:!!t,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:w})),E.jsx(E.Fragment,{children:xe.createPortal(E.jsxs(E.Fragment,{children:[w,L]}),y)})});ie.displayName="Modal";const rn=Object.assign(ie,{Manager:re});export{rn as B,re as M,De as a,p as b,on as c,Fe as d,H as u};
